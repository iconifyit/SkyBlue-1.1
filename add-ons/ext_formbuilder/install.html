<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"  lang="en-us">
    <head>
        <title>FormBuilder Installation</title>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" /> 
        <style type="text/css">
            body {padding: 15px 80px;}
            pre, .callout {padding: 15px; border: 1px solid #DDD; background: #EEE; font-family: monospace, courier;}
            * {font-family: Verdana, arial, sans-serif; font-size: 12px;}
            h1 {font-size: 1.5em;}
            div.section {padding-top: 0px;}
            div.section h3 {padding: 10px; color: #FFF; background: #333;}
            div.sub-section {padding-left: 20px;}
        </style>
    </head>
    <body>
        <h1>FormBuilder Installation</h1>
        
        <div class="callout">
			<p><strong>Important:</strong> This is a Beta version of the new FormBuilder. The code has not been 
			  fully tested so you may encounter some problems.
			</p>
			<p>You will also need to install this extension manually via FTP.</p>
			<p>
			  FormBuilder requires an updated version of the Fragments Plugin. You will need to 
			  upgrade your existing Fragments Plugin with the version included in this package.
			</p>
        </div>
        
        <ol>
			<li>Install the 'forms' Manager in <u>/skyblue_root/managers/</u></li>
			<li>Install the 'forms' Fragment in <u>/skyblue_root/data/skins/your_skin/fragments/</u></li>
			<li>Install the 'plugin.formbuilder.php' in <u>/skyblue_root/data/skins/plugins/</u></li>
			<li>Install the 'plugin.fragments.php' in <u>/skyblue_root/data/skins/plugins/</u></li>
        </ol>
        
        <h2>About FormBuilder</h2>
        
        <div class="section">
        	<h3>Forms Editor</h3>
        
        
			<h4>Title</h4>
			
			<p>
			  The 'title' the name of the form.
			</p>
			
			<h4>Show Title?</h4>
			
			<p>
			  If set to 'Yes', the name entered in the Title field will display above the form on 
			  your web page.
			</p>
			
			<h4>Blurb</h4>
			
			<p>
			  You can enter a paragraph of text here to display above your form.
			</p>
			
			<h4>Plugin Callback Event</h4>
			
			<p>
			  The new FormBuilder uses a standard SkyBlueCanvas plugin to process the submitted form. 
			  The value that is automatically generated here is the 'event' on which the plugin is 
			  fired. For more details see <a href="#formbuilder-plugin">FormBuilder Plugin</a> in this 
			  document.
			</p>
			
			<div class="callout">
				<p><strong>Note:</strong> 
					If you are using the Mailer plugin (included with FormBuilder), your form 
					<em>must</em> contain a field named 'email'.
				</p>
			</div>
			
			<h4>Recepients</h4>
			
			<p>
			  If your plugin uses the Mailer plugin (included with FormBuilder), you specify the 
			  recepient(s) in this field. To specify multiple recepients, enter the email addresses 
			  separated by a comma.
			</p>
			
			<h4>Auto Response</h4>
			
			<p>
			  If you are using the Mailer plugin (included with FormBuilder), and you want an 
			  auto-response to be sent to anyone who submits your form, enter the message here.
			</p>
			
			<p>
			  If you want to personalize the response, you can bind fields from your form to 
			  the response by using a token formatted as { field_name }. FormBuilder will 
			  automatically replace the tokens with the values entered by the user. For instance, 
			  if your form is a contact form that includes a field named 'name', you can insert 
			  the responder's name with the token {name}.
			</p>
			
			<p>
			  You can also use SiteVars and MyVars in your Auto Response (plugins required). Simply 
			  add the SiteVars or MyVars tokens to the response text and FormBuilder will replace 
			  them before sending the response. FormBuilder can detect whether SiteVars or MyVars 
			  are or are not installed so if they are not present, no error will occur.
			</p>
			
			<h4>CSS ID</h4>
			
			<p>
			  CSS ID is a unique CSS ID selector created for your form. Each form has a unique CSS ID.
			</p>
			
			<h4>Fragment Tokens</h4>
			
			<div class="sub-section">
				<h5>Fragment Body Token</h5>
				<p>
				  FormBuilder will create the Fragment token needed to add a form to your web page. 
				  Simply copy this token and paste it into your page text or template.
				</p>
				
				<h5>Fragment Head Tokean</h5>
				<p>
				  FormBuilder may need to load some dynamically generated JavaScript for each form. 
				  This Fragment View will autmatically load the script links in the HEAD element of 
				  your web page so you don't have in-line JavaScript code. Simply copy this token and 
				  paste it between the &lt;head&gt; and &lt;/head&gt; tags in your template.
				</p>
			</div>
        </div>
        
        <div class="section">
        	<h3>Fields Editor</h3>
        
			<h4>Form</h4>
			
			<p>This field simply displays the name &amp; ID of the form to which this field belongs.</p>
			
			<h4>Name</h4>
			
			<p>
			  This is the 'name' attribute of the field. When your form is posted, name will 
			  be the key in the _POST array.
			</p>
			
			<h4>Label</h4>
			
			<p>
			  This is the label corresponding to this field.
			</p>
			
			<h4>Field Type</h4>
			
			<p>
			  This indicates the type of field to create.
			</p>
			
			<h5>Supported Field Types</h5>
			
			<ul>
				<li>Text</li>
				<li>Textarea</li>
				<li>Password</li>
				<li>Checkbox</li>
				<li>Radio Button</li>
				<li>Select List</li>
				<li>File Upload</li>
				<li>Button</li>
			</ul>
			
			<h6>Text field</h6>
			
			<p>
			  This is a standard text input. This field has no configurtion options.
			</p>
			
			<div class="sub-section">
				<h6>Textarea</h6>
				
				<p>
				  This is a standard textarea element. When selected, this field type allows you to 
				  specify the number of rows and columns to set for the field.
				</p>
				
				<h6>Password</h6>
				
				<p>
				  This type creates a password field that masks the keys entered.
				</p>
				
				<p>
				  When this type is selected, you can specify 4 options to set guidelines for passwords. 
				  These include minimum characters, whether or not to require a digit, whether or not 
				  to require an Upper Case letter, and special characters that you define (e.g., punctuation characters).
				</p>
				
				<p>
				  If any of the above options are specified for the password field, FormBuidler will 
				  auto-generate a Regular Expression to perform the field validation.
				</p>
				
				<h6>Checkbox</h6>
				<h6>Radio</h6>
				
				<p>
				  Checkbox and Radio Button create checkboxes and radio buttons (respectively) for the options 
				  that you enter. Options are entered in the format:
				</p>
				
	<pre class="html">
	option1_value : Option 1 Text ; 
	option2_value : Option 2 Text ;
	option3_value : Option 3 Text ;
	</pre>
				  
				<h6>Select List</h6>
				
				<p>
				The Select List type creates an HTML select list. The options for Select List are specified 
				in the same format as Checkbox and Radio button. Select list, however, allows you to specify
				additional paramters for your select list. They are 'size' and 'Allow Multiple Selections'.
				</p>
				
				<h6>File Upload</h6>
				
				<p>
				  This field type will create a 'file' input to allow users to upload a file to your site. 
				  For security, this field type allows you to specify a list of accepted MIME types. 
				  <strong><em>This feature is not implemented in the FormBuilder test version</em></strong>
				</p>
				
				<h6>Button</h6>
				
				<p>
				  You can add custom buttons to your form with this type.
				</p>
				
				<div class="callout">
					<p><strong>Custom JavaScript Handlers</strong> (Requires jQuery)</p>
					<p>
					  Also with the Button type, you can enter a custom JavaScript callback (function) that 
					  will be triggered when the button is clicked by a site user. FormBuilder will handle 
					  the creation of the jQuery code needed to attach your callback to the button's 
					  'onclick' event. FormBuilder will also create a custom JavaScript file for your form 
					  and place it in the 'js' directory of your active skin. This file is dynamically 
					  generated and contains special markup to allow FormBuilder to parse and edit the 
					  file. You should not manually edit this file.
					</p>
				</div>
			</div>
			
			<h4>Validations</h4>
			
			<p>
			  FormBuilder allows you to specify server-side field validations. The supported validations are:
			</p>
			
			<ul>
				<li>notempty</li>
				<li>number</li>
				<li>email</li>
				<li>url</li>
				<li>minlength</li>
				<li>maxlength</li>
				<li>regex</li>
			</ul>
			
			<p>
			  The new FormBuilder also allows you to specify a custom field validation message for 
			  each field.
			</p>
			
			<h4>CSS Class</h4>
			
			<p>
			  This is a CSS class selector you specify for your field.
			</p>
			
			<h4>Field Order</h4>
			
			<p>
			  This field allows you to set/change the order in which the fields appear.
			</p>
        
        </div>
        
        <div class="section">
        	<h3>FormBuilder Fragment</h3>
        
        	<p>
        	  FormBuilder uses a Fragment to display and validate forms created with the FormBuilder Manager.
        	  The Fragment View(s) are templates for customizing the display of your form.
        	  FormBuilder Fragment is more advanced than most SkyBlueCanvas Fragments and 
        	  may require a higher skill level in PHP in order to modify the fragment code.
        	</p>
        </div>
        
        <div class="section" id="formbuilder-plugin">
            <h3>FormBuilder Plugin</h3>
            
            <p>
			When a site visitor completes and submits a form, the form is processed using a SkyBlueCanvas plugin (plugin.formbuilder.php).
			</p>
			<p>
			When a new form is created in the FormBuilder Manager, a unique callback event is automatically created 
			for the form. The callback event will be in the format:
			</p>
			<pre>callback_form_id_{id}</pre>
			
			<p>where {id} is the unique ID of the form object.</p>
			
			<div class="callout">
			    <p><strong>Note: </strong> When you create your first form, you will need to modify 
			    FormBuilder Plugin by copying the unique Callback Event ID created for the form. 
			    You will find this Event ID in the FormBuilder Form Editor. Copy the Event ID 
			    and open <u>/skyblue_root/data/plugins/plugin.formbuilder.php</u>, and replace the 
			    Event ID you see at the top of the file.
			</div>
			
			<p>
			The FormBuilder plugin includes a simple Mailer to email form responses to the 'recepients' value entered 
			for the Form in the FormBuilder Manager. If no recepients email address is entered, the form response will 
			be sent to the Default Contact for the web site as set in <strong>Admin &gt; Settings &gt; Default</strong> Info.
			</p>
			<p>
			You can add custom form handlers by creating a new callback in the FormBuilder plugin or by creating your own plugin. To register your callback to be triggered when the form is successfully validated, use the following format:
			</p>
<pre>
$Core-&gt;register('callback_form_id_{id}', 'MyCustomFormHandler');

function MyCustomFormHandler($data) {
	global $Filter;
	
	$Request = $Filter-&gt;get($data, 'request');
	$Form    = $Filter-&gt;get($data, 'form');
	$Fields  = $Filter-&gt;get($data, 'fields');
	
	// Your form processing code goes here.
	
}
</pre>
			<p>
			When a site visitor submits the form, FormBuilder will automatically validate the form based on the validation rules you set in FormBuilder Manager. The callback handler (plugin) will only be called if the form validates successfully. Otherwise, the appropriate error messages will be displayed along with the values previously entered by the site visitor.
			</p>
        </div>
        
    </body>
</html>